package br.com.npsoftwares.djbc.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.util.Calendar;

import br.com.npsoftwares.jdbc.ConnectionFactory;
import br.com.npsoftwares.jdbc.modelo.Contato;

public class ContatoDao {

	private Connection conn;
	
	public ContatoDao()
	{
		new ConnectionFactory();
		this.conn = ConnectionFactory.getConn();
	}
	
	public void addContato(Contato contato){
 
		 java.sql.Date dataForRecord = new java.sql.Date(Calendar.getInstance().getTimeInMillis());
		
	     StringBuilder sbQuery = new StringBuilder();
	     sbQuery.append("INSERT INTO tb0001_Contatos (");
	     sbQuery.append("nomeCONTATO,emailCONTATO,enderecoCONTATO,dataNascimentoCONTATO)");
	     sbQuery.append("values(?,?,?,?)");
	     
	     try {
			 
	    	 PreparedStatement stmt = conn.prepareStatement(sbQuery.toString());
	    	 
		     stmt.setString(1, contato.getNome());
		     stmt.setString(2,contato.getEmail());
		     stmt.setString(3,contato.getEndereco());
		     stmt.setDate(4,dataForRecord);
		     
		     stmt.execute();
		     stmt.close(); 
		     
		} catch (Exception e) {
			
			throw new RuntimeException(e);
		}

	}
}
